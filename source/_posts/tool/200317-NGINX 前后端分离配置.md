---
title: NGINX 前后端分离配置
permalink: nginx-front-back-end-config
date: 2020-03-17 11:33:24
updated:
tags:
  - nginx
categories:
description:
comments: true
toc: true
cover_img: https://images.unsplash.com/photo-1515674447568-09bbb507b96c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=320&q=80
feature_img:
---

前后端分离的开发已是主流，本文主要是记录前后端分离项目的 NGINX 配置。

<!-- more -->

- 前端 Vue web 入口 `host.test`
- 后端 PHP Yii service 入口 `host.test/api`

```conf
server {
  listen 80;
  server_name host.test;
  root /data/project/;
  index index.html index.php;

  location ^~ /api {
    root /data/project/service/web/;
    fastcgi_pass 127.0.0.1:9000;
    include fastcgi.conf;
    fastcgi_param  SCRIPT_FILENAME /data/project/service/web/index.php;
    fastcgi_param  SCRIPT_NAME     /api/index.php;
    access_log logs/service-access.log;
    error_log logs/service-error.log;
  }

  location ^~ / {
    alias /data/project/web/dist/;
    access_log logs/web-access.log;
    error_log logs/web-error.log;
  }
}
```
