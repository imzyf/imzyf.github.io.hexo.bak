---
title: Vue 使用笔记
permalink: vue-notes
date: 2019-08-08 17:33:38
updated: 2019-11-18 11:57:00
tags:
  - vue
categories:
description:
comments: true
toc: true
cover_img: https://images.unsplash.com/photo-1569161031678-f49b4b9ca1c2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=480&q=70
feature_img:
---

记录开发过程中使用 Vue 时遇到的一些问题和解决办法。

<!-- more -->

## watch 对象的属性

```javascript
data: {
   a: 100,
   msg: {
      channel: "音乐",
      style: "活泼"
   }
},
watch: {
   a(newval, oldVal) {
      console.log("new: %s, old: %s", newval, oldVal);
   }
}
```

```javascript
watch: {
   msg: {
      handler(newValue, oldValue) {
         console.log(newValue)
      },
      // 深度监听
      deep: true
   }
}
```

监听对象内的某一具体属性，可以通过 `computed` 做中间层来实现：

```javascript
computed: {
   channel() {
      return this.msg.channel
   }
},
watch:{
   channel(newValue, oldValue) {
      console.log('new: %s, old: %s', newval, oldVal)
   }
}
```

## 判断 data 中的对象是否为空

1、利用 `jQuery` 的 `isEmptyObject`：

```javascript
$.isEmptyObject(data.list);
```

实现源码：

```javascript
isEmptyObject: function(obj) {
   var name;
   for (name in obj) {
      return false;
   }
   return true;
}
```

2、获取到对象中的属性名，存到一个数组中，通过判断数组的 `length` 来判断此对象是否为空：

```javascript
var arr = Object.getOwnPropertyNames(data);
alert(arr.length == 0); // true
```

ES6：

```javascript
var arr = Object.keys(data.list);
alert(arr.length == 0); // true
```

3、转化为 `json` 字符串，再判断该字符串是否为 `{}`：

```javascript
var b = JSON.stringify(data) == "{}";
alert(b); // true
```

> References：
>
> - [jQuery.isEmptyObject() 函数详解](https://blog.csdn.net/wangqing84411433/article/details/79582888)
