---
title: MySQL 空格问题
permalink: mysql-blank-space
date: 2020-11-28 11:11:59
updated:
comments: true
toc: true
tags:
  - redis
categories:
description:
cover_img:
feature_img:
---

## 看现象

创建一个测试数据库表，插入测试数据：

```sql
CREATE TABLE `blank_space` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `desc` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uniq_key` (`uid`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `blank_space`(`id`, `uid`, `desc`) VALUES (1, 'abc ', '末尾1个');
INSERT INTO `blank_space`(`id`, `uid`, `desc`) VALUES (2, ' abc', '开头1个');
INSERT INTO `blank_space`(`id`, `uid`, `desc`) VALUES (3, '  abc', '开头2个');
```

| id  | uid     | desc      |
| --- | ------- | --------- |
| 1   | abc\_   | 末尾 1 个 |
| 2   | \_abc   | 开头 1 个 |
| 3   | \_\_abc | 开头 2 个 |

> uid 实际上没有 `_`，这样写是为了看到空格。

执行操作：

```sql
SELECT * FROM blank_space WHERE uid = 'abc';

SELECT * FROM blank_space WHERE uid = 'abc ';

SELECT * FROM blank_space WHERE uid = 'abc   ';
```

都可以查询出：

| id  | uid   | desc      |
| --- | ----- | --------- |
| 1   | abc\_ | 末尾 1 个 |

执行操作：

```sql
INSERT INTO `blank_space`(`uid`, `desc`) VALUES ('abc', '无空格');
-- 1062 - Duplicate entry 'abc' for key 'uniq_key', Time: 0.322000s

INSERT INTO `blank_space`(`uid`, `desc`) VALUES ('abc  ', '末位两个');
-- 1062 - Duplicate entry 'abc' for key 'uniq_key', Time: 0.322000s
```

## References

-- EOF --
